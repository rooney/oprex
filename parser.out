Created by PLY version 3.4 (http://www.dabeaz.com/ply)

Grammar

Rule 0     S' -> oprex
Rule 1     oprex -> <empty>
Rule 2     oprex -> WHITESPACE
Rule 3     oprex -> NEWLINE
Rule 4     oprex -> NEWLINE root_expression
Rule 5     oprex -> NEWLINE INDENT root_expression DEDENT
Rule 6     root_expression -> global_flags
Rule 7     root_expression -> expression
Rule 8     root_expression -> global_flags expression
Rule 9     global_flags -> LPAREN FLAGSET RPAREN NEWLINE
Rule 10    expression -> expr optional_subblock
Rule 11    expr -> string_expr
Rule 12    expr -> lookup_expr
Rule 13    expr -> orblock_expr
Rule 14    expr -> flagged_expr
Rule 15    expr -> lookaround_expr
Rule 16    expr -> quantified_expr
Rule 17    expr -> numrange_shortcut
Rule 18    string_expr -> STRING NEWLINE
Rule 19    string_expr -> STRING str_b NEWLINE
Rule 20    string_expr -> str_b STRING NEWLINE
Rule 21    string_expr -> str_b STRING str_b NEWLINE
Rule 22    str_b -> DOT
Rule 23    str_b -> UNDERSCORE
Rule 24    numrange_shortcut -> STRING DOT DOT STRING NEWLINE
Rule 25    quantified_expr -> quantifier WHITESPACE expr
Rule 26    quantified_expr -> quantifier COLON charclass
Rule 27    quantifier -> repeat_N_times
Rule 28    quantifier -> repeat_range
Rule 29    repeat_N_times -> AT NUMBER of
Rule 30    repeat_N_times -> NUMBER of
Rule 31    repeat_range -> AT numrange of
Rule 32    repeat_range -> numrange backtrack MINUS of
Rule 33    repeat_range -> NUMBER backtrack PLUS DOT DOT of
Rule 34    repeat_range -> NUMBER backtrack PLUS DOT DOT NUMBER of
Rule 35    backtrack -> WHITESPACE LT LT
Rule 36    of -> WHITESPACE OF
Rule 37    numrange -> NUMBER DOT DOT
Rule 38    numrange -> NUMBER DOT DOT NUMBER
Rule 39    flagged_expr -> scoped_flags expr
Rule 40    scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE
Rule 41    orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK
Rule 42    oritems -> oritem
Rule 43    oritems -> oritem oritems
Rule 44    oritem -> or condition WHITESPACE QUESTMARK WHITESPACE expr
Rule 45    oritem -> or condition WHITESPACE QUESTMARK NEWLINE
Rule 46    oritem -> or expr
Rule 47    oritem -> or NEWLINE
Rule 48    condition -> LBRACKET VARNAME RBRACKET
Rule 49    or -> BAR
Rule 50    lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND
Rule 51    lookitems -> lookitem NEWLINE
Rule 52    lookitems -> lookitem NEWLINE lookitems
Rule 53    lookitem -> BAR lookup GT
Rule 54    lookitem -> BAR EXCLAMARK lookup GT
Rule 55    lookitem -> LT lookup BAR
Rule 56    lookitem -> LT EXCLAMARK lookup BAR
Rule 57    lookitem -> BAR lookup BAR
Rule 58    lookup_expr -> lookup NEWLINE
Rule 59    lookup -> lookup_item
Rule 60    lookup -> chain_begin lookup_chain chain_end
Rule 61    chain_begin -> AT SLASH SLASH
Rule 62    chain_begin -> AT DOT SLASH
Rule 63    chain_begin -> AT SLASH
Rule 64    chain_begin -> SLASH SLASH
Rule 65    chain_begin -> DOT SLASH
Rule 66    chain_begin -> SLASH
Rule 67    chain_end -> SLASH
Rule 68    chain_end -> DOT
Rule 69    chain_end -> <empty>
Rule 70    lookup_chain -> lookup_item SLASH
Rule 71    lookup_chain -> lookup_item SLASH lookup_chain
Rule 72    lookup_item -> lookup_type
Rule 73    lookup_item -> lookup_type QUESTMARK
Rule 74    lookup_type -> variable_lookup
Rule 75    lookup_type -> negated_lookup
Rule 76    lookup_type -> backreference
Rule 77    variable_lookup -> VARNAME
Rule 78    variable_lookup -> FAIL
Rule 79    negated_lookup -> NON VARNAME
Rule 80    backreference -> EQUALSIGN VARNAME
Rule 81    charclass -> charitems NEWLINE
Rule 82    charitems -> WHITESPACE charitem
Rule 83    charitems -> WHITESPACE charitem charitems
Rule 84    charitem -> ranged_char
Rule 85    charitem -> single_char
Rule 86    charitem -> period_char
Rule 87    ranged_char -> CHAR DOT DOT CHAR
Rule 88    period_char -> DOT
Rule 89    single_char -> CHAR
Rule 90    optional_subblock -> begin_subblock definitions end_subblock
Rule 91    optional_subblock -> <empty>
Rule 92    begin_subblock -> INDENT
Rule 93    end_subblock -> DEDENT
Rule 94    definitions -> definition
Rule 95    definitions -> definition definitions
Rule 96    definition -> assignment
Rule 97    definition -> GLOBALMARK assignment
Rule 98    assignment -> declaration equals assignment
Rule 99    assignment -> declaration equals expression
Rule 100   assignment -> declaration COLON charclass optional_subblock
Rule 101   equals -> EQUALSIGN
Rule 102   equals -> WHITESPACE EQUALSIGN
Rule 103   equals -> EQUALSIGN WHITESPACE
Rule 104   equals -> WHITESPACE EQUALSIGN WHITESPACE
Rule 105   declaration -> VARNAME
Rule 106   declaration -> LBRACKET VARNAME RBRACKET

Terminals, with rules where they appear

AT                   : 29 31 61 62 63
BAR                  : 49 53 54 55 56 57 57
BEGIN_LOOKAROUND     : 50
BEGIN_ORBLOCK        : 41
CHAR                 : 87 87 89
COLON                : 26 100
DEDENT               : 5 93
DOT                  : 22 24 24 33 33 34 34 37 37 38 38 62 65 68 87 87 88
END_OF_LOOKAROUND    : 50
END_OF_ORBLOCK       : 41
EQUALSIGN            : 80 101 102 103 104
EXCLAMARK            : 54 56
FAIL                 : 78
FLAGSET              : 9 40
GLOBALMARK           : 97
GT                   : 53 54
INDENT               : 5 92
LBRACKET             : 48 106
LPAREN               : 9 40
LT                   : 35 35 55 56
MINUS                : 32
NEWLINE              : 3 4 5 9 18 19 20 21 24 41 45 47 50 51 52 58 81
NON                  : 79
NUMBER               : 29 30 33 34 34 37 38 38
OF                   : 36
PLUS                 : 33 34
QUESTMARK            : 44 45 73
RBRACKET             : 48 106
RPAREN               : 9 40
SLASH                : 61 61 62 63 64 64 65 66 67 70 71
STRING               : 18 19 20 21 24 24
UNDERSCORE           : 23
VARNAME              : 48 77 79 80 105 106
WHITESPACE           : 2 25 35 36 40 44 44 45 82 83 102 103 104 104
error                : 

Nonterminals, with rules where they appear

assignment           : 96 97 98
backreference        : 76
backtrack            : 32 33 34
begin_subblock       : 90
chain_begin          : 60
chain_end            : 60
charclass            : 26 100
charitem             : 82 83
charitems            : 81 83
condition            : 44 45
declaration          : 98 99 100
definition           : 94 95
definitions          : 90 95
end_subblock         : 90
equals               : 98 99
expr                 : 10 25 39 44 46
expression           : 7 8 99
flagged_expr         : 14
global_flags         : 6 8
lookaround_expr      : 15
lookitem             : 51 52
lookitems            : 50 52
lookup               : 53 54 55 56 57 58
lookup_chain         : 60 71
lookup_expr          : 12
lookup_item          : 59 70 71
lookup_type          : 72 73
negated_lookup       : 75
numrange             : 31 32
numrange_shortcut    : 17
of                   : 29 30 31 32 33 34
oprex                : 0
optional_subblock    : 10 100
or                   : 44 45 46 47
orblock_expr         : 13
oritem               : 42 43
oritems              : 41 43
period_char          : 86
quantified_expr      : 16
quantifier           : 25 26
ranged_char          : 84
repeat_N_times       : 27
repeat_range         : 28
root_expression      : 4 5
scoped_flags         : 39
single_char          : 85
str_b                : 19 20 21 21
string_expr          : 11
variable_lookup      : 74

Parsing method: LALR

state 0

    (0) S' -> . oprex
    (1) oprex -> .
    (2) oprex -> . WHITESPACE
    (3) oprex -> . NEWLINE
    (4) oprex -> . NEWLINE root_expression
    (5) oprex -> . NEWLINE INDENT root_expression DEDENT

    $end            reduce using rule 1 (oprex -> .)
    WHITESPACE      shift and go to state 2
    NEWLINE         shift and go to state 3

    oprex                          shift and go to state 1

state 1

    (0) S' -> oprex .



state 2

    (2) oprex -> WHITESPACE .

    $end            reduce using rule 2 (oprex -> WHITESPACE .)


state 3

    (3) oprex -> NEWLINE .
    (4) oprex -> NEWLINE . root_expression
    (5) oprex -> NEWLINE . INDENT root_expression DEDENT
    (6) root_expression -> . global_flags
    (7) root_expression -> . expression
    (8) root_expression -> . global_flags expression
    (9) global_flags -> . LPAREN FLAGSET RPAREN NEWLINE
    (10) expression -> . expr optional_subblock
    (11) expr -> . string_expr
    (12) expr -> . lookup_expr
    (13) expr -> . orblock_expr
    (14) expr -> . flagged_expr
    (15) expr -> . lookaround_expr
    (16) expr -> . quantified_expr
    (17) expr -> . numrange_shortcut
    (18) string_expr -> . STRING NEWLINE
    (19) string_expr -> . STRING str_b NEWLINE
    (20) string_expr -> . str_b STRING NEWLINE
    (21) string_expr -> . str_b STRING str_b NEWLINE
    (58) lookup_expr -> . lookup NEWLINE
    (41) orblock_expr -> . BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK
    (39) flagged_expr -> . scoped_flags expr
    (50) lookaround_expr -> . BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND
    (25) quantified_expr -> . quantifier WHITESPACE expr
    (26) quantified_expr -> . quantifier COLON charclass
    (24) numrange_shortcut -> . STRING DOT DOT STRING NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (40) scoped_flags -> . LPAREN FLAGSET RPAREN WHITESPACE
    (27) quantifier -> . repeat_N_times
    (28) quantifier -> . repeat_range
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (29) repeat_N_times -> . AT NUMBER of
    (30) repeat_N_times -> . NUMBER of
    (31) repeat_range -> . AT numrange of
    (32) repeat_range -> . numrange backtrack MINUS of
    (33) repeat_range -> . NUMBER backtrack PLUS DOT DOT of
    (34) repeat_range -> . NUMBER backtrack PLUS DOT DOT NUMBER of
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (37) numrange -> . NUMBER DOT DOT
    (38) numrange -> . NUMBER DOT DOT NUMBER
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    $end            reduce using rule 3 (oprex -> NEWLINE .)
    INDENT          shift and go to state 32
    LPAREN          shift and go to state 26
    STRING          shift and go to state 21
    BEGIN_ORBLOCK   shift and go to state 16
    BEGIN_LOOKAROUND shift and go to state 24
    DOT             shift and go to state 14
    UNDERSCORE      shift and go to state 12
    AT              shift and go to state 25
    SLASH           shift and go to state 36
    NUMBER          shift and go to state 10
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    scoped_flags                   shift and go to state 20
    repeat_N_times                 shift and go to state 4
    flagged_expr                   shift and go to state 5
    global_flags                   shift and go to state 6
    repeat_range                   shift and go to state 8
    backreference                  shift and go to state 9
    chain_begin                    shift and go to state 11
    lookup_expr                    shift and go to state 13
    string_expr                    shift and go to state 40
    lookaround_expr                shift and go to state 35
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 18
    negated_lookup                 shift and go to state 19
    orblock_expr                   shift and go to state 22
    numrange                       shift and go to state 23
    quantifier                     shift and go to state 28
    quantified_expr                shift and go to state 31
    expr                           shift and go to state 33
    lookup_type                    shift and go to state 34
    str_b                          shift and go to state 15
    expression                     shift and go to state 37
    root_expression                shift and go to state 38
    numrange_shortcut              shift and go to state 39
    variable_lookup                shift and go to state 41

state 4

    (27) quantifier -> repeat_N_times .

    WHITESPACE      reduce using rule 27 (quantifier -> repeat_N_times .)
    COLON           reduce using rule 27 (quantifier -> repeat_N_times .)


state 5

    (14) expr -> flagged_expr .

    INDENT          reduce using rule 14 (expr -> flagged_expr .)
    $end            reduce using rule 14 (expr -> flagged_expr .)
    DEDENT          reduce using rule 14 (expr -> flagged_expr .)
    BAR             reduce using rule 14 (expr -> flagged_expr .)
    END_OF_ORBLOCK  reduce using rule 14 (expr -> flagged_expr .)
    GLOBALMARK      reduce using rule 14 (expr -> flagged_expr .)
    VARNAME         reduce using rule 14 (expr -> flagged_expr .)
    LBRACKET        reduce using rule 14 (expr -> flagged_expr .)


state 6

    (6) root_expression -> global_flags .
    (8) root_expression -> global_flags . expression
    (10) expression -> . expr optional_subblock
    (11) expr -> . string_expr
    (12) expr -> . lookup_expr
    (13) expr -> . orblock_expr
    (14) expr -> . flagged_expr
    (15) expr -> . lookaround_expr
    (16) expr -> . quantified_expr
    (17) expr -> . numrange_shortcut
    (18) string_expr -> . STRING NEWLINE
    (19) string_expr -> . STRING str_b NEWLINE
    (20) string_expr -> . str_b STRING NEWLINE
    (21) string_expr -> . str_b STRING str_b NEWLINE
    (58) lookup_expr -> . lookup NEWLINE
    (41) orblock_expr -> . BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK
    (39) flagged_expr -> . scoped_flags expr
    (50) lookaround_expr -> . BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND
    (25) quantified_expr -> . quantifier WHITESPACE expr
    (26) quantified_expr -> . quantifier COLON charclass
    (24) numrange_shortcut -> . STRING DOT DOT STRING NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (40) scoped_flags -> . LPAREN FLAGSET RPAREN WHITESPACE
    (27) quantifier -> . repeat_N_times
    (28) quantifier -> . repeat_range
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (29) repeat_N_times -> . AT NUMBER of
    (30) repeat_N_times -> . NUMBER of
    (31) repeat_range -> . AT numrange of
    (32) repeat_range -> . numrange backtrack MINUS of
    (33) repeat_range -> . NUMBER backtrack PLUS DOT DOT of
    (34) repeat_range -> . NUMBER backtrack PLUS DOT DOT NUMBER of
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (37) numrange -> . NUMBER DOT DOT
    (38) numrange -> . NUMBER DOT DOT NUMBER
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    $end            reduce using rule 6 (root_expression -> global_flags .)
    DEDENT          reduce using rule 6 (root_expression -> global_flags .)
    STRING          shift and go to state 21
    BEGIN_ORBLOCK   shift and go to state 16
    BEGIN_LOOKAROUND shift and go to state 24
    DOT             shift and go to state 14
    UNDERSCORE      shift and go to state 12
    LPAREN          shift and go to state 42
    AT              shift and go to state 25
    SLASH           shift and go to state 36
    NUMBER          shift and go to state 10
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    scoped_flags                   shift and go to state 20
    repeat_N_times                 shift and go to state 4
    flagged_expr                   shift and go to state 5
    repeat_range                   shift and go to state 8
    backreference                  shift and go to state 9
    chain_begin                    shift and go to state 11
    lookup_expr                    shift and go to state 13
    string_expr                    shift and go to state 40
    lookaround_expr                shift and go to state 35
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 18
    negated_lookup                 shift and go to state 19
    orblock_expr                   shift and go to state 22
    numrange                       shift and go to state 23
    quantifier                     shift and go to state 28
    quantified_expr                shift and go to state 31
    expr                           shift and go to state 33
    lookup_type                    shift and go to state 34
    str_b                          shift and go to state 15
    expression                     shift and go to state 43
    numrange_shortcut              shift and go to state 39
    variable_lookup                shift and go to state 41

state 7

    (77) variable_lookup -> VARNAME .

    QUESTMARK       reduce using rule 77 (variable_lookup -> VARNAME .)
    SLASH           reduce using rule 77 (variable_lookup -> VARNAME .)
    BAR             reduce using rule 77 (variable_lookup -> VARNAME .)
    NEWLINE         reduce using rule 77 (variable_lookup -> VARNAME .)
    GT              reduce using rule 77 (variable_lookup -> VARNAME .)


state 8

    (28) quantifier -> repeat_range .

    WHITESPACE      reduce using rule 28 (quantifier -> repeat_range .)
    COLON           reduce using rule 28 (quantifier -> repeat_range .)


state 9

    (76) lookup_type -> backreference .

    QUESTMARK       reduce using rule 76 (lookup_type -> backreference .)
    NEWLINE         reduce using rule 76 (lookup_type -> backreference .)
    SLASH           reduce using rule 76 (lookup_type -> backreference .)
    BAR             reduce using rule 76 (lookup_type -> backreference .)
    GT              reduce using rule 76 (lookup_type -> backreference .)


state 10

    (30) repeat_N_times -> NUMBER . of
    (33) repeat_range -> NUMBER . backtrack PLUS DOT DOT of
    (34) repeat_range -> NUMBER . backtrack PLUS DOT DOT NUMBER of
    (37) numrange -> NUMBER . DOT DOT
    (38) numrange -> NUMBER . DOT DOT NUMBER
    (36) of -> . WHITESPACE OF
    (35) backtrack -> . WHITESPACE LT LT

    DOT             shift and go to state 47
    WHITESPACE      shift and go to state 44

    of                             shift and go to state 46
    backtrack                      shift and go to state 45

state 11

    (60) lookup -> chain_begin . lookup_chain chain_end
    (70) lookup_chain -> . lookup_item SLASH
    (71) lookup_chain -> . lookup_item SLASH lookup_chain
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    lookup_chain                   shift and go to state 48
    lookup_type                    shift and go to state 34
    backreference                  shift and go to state 9
    lookup_item                    shift and go to state 49
    negated_lookup                 shift and go to state 19
    variable_lookup                shift and go to state 41

state 12

    (23) str_b -> UNDERSCORE .

    NEWLINE         reduce using rule 23 (str_b -> UNDERSCORE .)
    STRING          reduce using rule 23 (str_b -> UNDERSCORE .)


state 13

    (12) expr -> lookup_expr .

    INDENT          reduce using rule 12 (expr -> lookup_expr .)
    $end            reduce using rule 12 (expr -> lookup_expr .)
    DEDENT          reduce using rule 12 (expr -> lookup_expr .)
    BAR             reduce using rule 12 (expr -> lookup_expr .)
    END_OF_ORBLOCK  reduce using rule 12 (expr -> lookup_expr .)
    GLOBALMARK      reduce using rule 12 (expr -> lookup_expr .)
    VARNAME         reduce using rule 12 (expr -> lookup_expr .)
    LBRACKET        reduce using rule 12 (expr -> lookup_expr .)


state 14

    (22) str_b -> DOT .
    (65) chain_begin -> DOT . SLASH

    STRING          reduce using rule 22 (str_b -> DOT .)
    SLASH           shift and go to state 50


state 15

    (20) string_expr -> str_b . STRING NEWLINE
    (21) string_expr -> str_b . STRING str_b NEWLINE

    STRING          shift and go to state 51


state 16

    (41) orblock_expr -> BEGIN_ORBLOCK . NEWLINE oritems END_OF_ORBLOCK

    NEWLINE         shift and go to state 52


state 17

    (59) lookup -> lookup_item .

    GT              reduce using rule 59 (lookup -> lookup_item .)
    BAR             reduce using rule 59 (lookup -> lookup_item .)
    NEWLINE         reduce using rule 59 (lookup -> lookup_item .)


state 18

    (58) lookup_expr -> lookup . NEWLINE

    NEWLINE         shift and go to state 53


state 19

    (75) lookup_type -> negated_lookup .

    QUESTMARK       reduce using rule 75 (lookup_type -> negated_lookup .)
    NEWLINE         reduce using rule 75 (lookup_type -> negated_lookup .)
    SLASH           reduce using rule 75 (lookup_type -> negated_lookup .)
    BAR             reduce using rule 75 (lookup_type -> negated_lookup .)
    GT              reduce using rule 75 (lookup_type -> negated_lookup .)


state 20

    (39) flagged_expr -> scoped_flags . expr
    (11) expr -> . string_expr
    (12) expr -> . lookup_expr
    (13) expr -> . orblock_expr
    (14) expr -> . flagged_expr
    (15) expr -> . lookaround_expr
    (16) expr -> . quantified_expr
    (17) expr -> . numrange_shortcut
    (18) string_expr -> . STRING NEWLINE
    (19) string_expr -> . STRING str_b NEWLINE
    (20) string_expr -> . str_b STRING NEWLINE
    (21) string_expr -> . str_b STRING str_b NEWLINE
    (58) lookup_expr -> . lookup NEWLINE
    (41) orblock_expr -> . BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK
    (39) flagged_expr -> . scoped_flags expr
    (50) lookaround_expr -> . BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND
    (25) quantified_expr -> . quantifier WHITESPACE expr
    (26) quantified_expr -> . quantifier COLON charclass
    (24) numrange_shortcut -> . STRING DOT DOT STRING NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (40) scoped_flags -> . LPAREN FLAGSET RPAREN WHITESPACE
    (27) quantifier -> . repeat_N_times
    (28) quantifier -> . repeat_range
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (29) repeat_N_times -> . AT NUMBER of
    (30) repeat_N_times -> . NUMBER of
    (31) repeat_range -> . AT numrange of
    (32) repeat_range -> . numrange backtrack MINUS of
    (33) repeat_range -> . NUMBER backtrack PLUS DOT DOT of
    (34) repeat_range -> . NUMBER backtrack PLUS DOT DOT NUMBER of
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (37) numrange -> . NUMBER DOT DOT
    (38) numrange -> . NUMBER DOT DOT NUMBER
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    STRING          shift and go to state 21
    BEGIN_ORBLOCK   shift and go to state 16
    BEGIN_LOOKAROUND shift and go to state 24
    DOT             shift and go to state 14
    UNDERSCORE      shift and go to state 12
    LPAREN          shift and go to state 42
    AT              shift and go to state 25
    SLASH           shift and go to state 36
    NUMBER          shift and go to state 10
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    scoped_flags                   shift and go to state 20
    repeat_N_times                 shift and go to state 4
    flagged_expr                   shift and go to state 5
    repeat_range                   shift and go to state 8
    backreference                  shift and go to state 9
    chain_begin                    shift and go to state 11
    lookup_expr                    shift and go to state 13
    string_expr                    shift and go to state 40
    lookaround_expr                shift and go to state 35
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 18
    negated_lookup                 shift and go to state 19
    orblock_expr                   shift and go to state 22
    numrange                       shift and go to state 23
    quantifier                     shift and go to state 28
    quantified_expr                shift and go to state 31
    expr                           shift and go to state 54
    lookup_type                    shift and go to state 34
    str_b                          shift and go to state 15
    numrange_shortcut              shift and go to state 39
    variable_lookup                shift and go to state 41

state 21

    (18) string_expr -> STRING . NEWLINE
    (19) string_expr -> STRING . str_b NEWLINE
    (24) numrange_shortcut -> STRING . DOT DOT STRING NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE

    NEWLINE         shift and go to state 55
    DOT             shift and go to state 56
    UNDERSCORE      shift and go to state 12

    str_b                          shift and go to state 57

state 22

    (13) expr -> orblock_expr .

    INDENT          reduce using rule 13 (expr -> orblock_expr .)
    $end            reduce using rule 13 (expr -> orblock_expr .)
    DEDENT          reduce using rule 13 (expr -> orblock_expr .)
    BAR             reduce using rule 13 (expr -> orblock_expr .)
    END_OF_ORBLOCK  reduce using rule 13 (expr -> orblock_expr .)
    GLOBALMARK      reduce using rule 13 (expr -> orblock_expr .)
    VARNAME         reduce using rule 13 (expr -> orblock_expr .)
    LBRACKET        reduce using rule 13 (expr -> orblock_expr .)


state 23

    (32) repeat_range -> numrange . backtrack MINUS of
    (35) backtrack -> . WHITESPACE LT LT

    WHITESPACE      shift and go to state 58

    backtrack                      shift and go to state 59

state 24

    (50) lookaround_expr -> BEGIN_LOOKAROUND . NEWLINE lookitems END_OF_LOOKAROUND

    NEWLINE         shift and go to state 60


state 25

    (61) chain_begin -> AT . SLASH SLASH
    (62) chain_begin -> AT . DOT SLASH
    (63) chain_begin -> AT . SLASH
    (29) repeat_N_times -> AT . NUMBER of
    (31) repeat_range -> AT . numrange of
    (37) numrange -> . NUMBER DOT DOT
    (38) numrange -> . NUMBER DOT DOT NUMBER

    SLASH           shift and go to state 63
    DOT             shift and go to state 64
    NUMBER          shift and go to state 61

    numrange                       shift and go to state 62

state 26

    (9) global_flags -> LPAREN . FLAGSET RPAREN NEWLINE
    (40) scoped_flags -> LPAREN . FLAGSET RPAREN WHITESPACE

    FLAGSET         shift and go to state 65


state 27

    (78) variable_lookup -> FAIL .

    QUESTMARK       reduce using rule 78 (variable_lookup -> FAIL .)
    NEWLINE         reduce using rule 78 (variable_lookup -> FAIL .)
    SLASH           reduce using rule 78 (variable_lookup -> FAIL .)
    BAR             reduce using rule 78 (variable_lookup -> FAIL .)
    GT              reduce using rule 78 (variable_lookup -> FAIL .)


state 28

    (25) quantified_expr -> quantifier . WHITESPACE expr
    (26) quantified_expr -> quantifier . COLON charclass

    WHITESPACE      shift and go to state 67
    COLON           shift and go to state 66


state 29

    (80) backreference -> EQUALSIGN . VARNAME

    VARNAME         shift and go to state 68


state 30

    (79) negated_lookup -> NON . VARNAME

    VARNAME         shift and go to state 69


state 31

    (16) expr -> quantified_expr .

    INDENT          reduce using rule 16 (expr -> quantified_expr .)
    $end            reduce using rule 16 (expr -> quantified_expr .)
    DEDENT          reduce using rule 16 (expr -> quantified_expr .)
    BAR             reduce using rule 16 (expr -> quantified_expr .)
    END_OF_ORBLOCK  reduce using rule 16 (expr -> quantified_expr .)
    GLOBALMARK      reduce using rule 16 (expr -> quantified_expr .)
    VARNAME         reduce using rule 16 (expr -> quantified_expr .)
    LBRACKET        reduce using rule 16 (expr -> quantified_expr .)


state 32

    (5) oprex -> NEWLINE INDENT . root_expression DEDENT
    (6) root_expression -> . global_flags
    (7) root_expression -> . expression
    (8) root_expression -> . global_flags expression
    (9) global_flags -> . LPAREN FLAGSET RPAREN NEWLINE
    (10) expression -> . expr optional_subblock
    (11) expr -> . string_expr
    (12) expr -> . lookup_expr
    (13) expr -> . orblock_expr
    (14) expr -> . flagged_expr
    (15) expr -> . lookaround_expr
    (16) expr -> . quantified_expr
    (17) expr -> . numrange_shortcut
    (18) string_expr -> . STRING NEWLINE
    (19) string_expr -> . STRING str_b NEWLINE
    (20) string_expr -> . str_b STRING NEWLINE
    (21) string_expr -> . str_b STRING str_b NEWLINE
    (58) lookup_expr -> . lookup NEWLINE
    (41) orblock_expr -> . BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK
    (39) flagged_expr -> . scoped_flags expr
    (50) lookaround_expr -> . BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND
    (25) quantified_expr -> . quantifier WHITESPACE expr
    (26) quantified_expr -> . quantifier COLON charclass
    (24) numrange_shortcut -> . STRING DOT DOT STRING NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (40) scoped_flags -> . LPAREN FLAGSET RPAREN WHITESPACE
    (27) quantifier -> . repeat_N_times
    (28) quantifier -> . repeat_range
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (29) repeat_N_times -> . AT NUMBER of
    (30) repeat_N_times -> . NUMBER of
    (31) repeat_range -> . AT numrange of
    (32) repeat_range -> . numrange backtrack MINUS of
    (33) repeat_range -> . NUMBER backtrack PLUS DOT DOT of
    (34) repeat_range -> . NUMBER backtrack PLUS DOT DOT NUMBER of
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (37) numrange -> . NUMBER DOT DOT
    (38) numrange -> . NUMBER DOT DOT NUMBER
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    LPAREN          shift and go to state 26
    STRING          shift and go to state 21
    BEGIN_ORBLOCK   shift and go to state 16
    BEGIN_LOOKAROUND shift and go to state 24
    DOT             shift and go to state 14
    UNDERSCORE      shift and go to state 12
    AT              shift and go to state 25
    SLASH           shift and go to state 36
    NUMBER          shift and go to state 10
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    scoped_flags                   shift and go to state 20
    repeat_N_times                 shift and go to state 4
    flagged_expr                   shift and go to state 5
    global_flags                   shift and go to state 6
    repeat_range                   shift and go to state 8
    backreference                  shift and go to state 9
    chain_begin                    shift and go to state 11
    lookup_expr                    shift and go to state 13
    string_expr                    shift and go to state 40
    lookaround_expr                shift and go to state 35
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 18
    negated_lookup                 shift and go to state 19
    orblock_expr                   shift and go to state 22
    numrange                       shift and go to state 23
    quantifier                     shift and go to state 28
    quantified_expr                shift and go to state 31
    expr                           shift and go to state 33
    lookup_type                    shift and go to state 34
    str_b                          shift and go to state 15
    expression                     shift and go to state 37
    root_expression                shift and go to state 70
    numrange_shortcut              shift and go to state 39
    variable_lookup                shift and go to state 41

state 33

    (10) expression -> expr . optional_subblock
    (90) optional_subblock -> . begin_subblock definitions end_subblock
    (91) optional_subblock -> .
    (92) begin_subblock -> . INDENT

    $end            reduce using rule 91 (optional_subblock -> .)
    DEDENT          reduce using rule 91 (optional_subblock -> .)
    GLOBALMARK      reduce using rule 91 (optional_subblock -> .)
    VARNAME         reduce using rule 91 (optional_subblock -> .)
    LBRACKET        reduce using rule 91 (optional_subblock -> .)
    INDENT          shift and go to state 71

    optional_subblock              shift and go to state 73
    begin_subblock                 shift and go to state 72

state 34

    (72) lookup_item -> lookup_type .
    (73) lookup_item -> lookup_type . QUESTMARK

    SLASH           reduce using rule 72 (lookup_item -> lookup_type .)
    NEWLINE         reduce using rule 72 (lookup_item -> lookup_type .)
    GT              reduce using rule 72 (lookup_item -> lookup_type .)
    BAR             reduce using rule 72 (lookup_item -> lookup_type .)
    QUESTMARK       shift and go to state 74


state 35

    (15) expr -> lookaround_expr .

    INDENT          reduce using rule 15 (expr -> lookaround_expr .)
    $end            reduce using rule 15 (expr -> lookaround_expr .)
    DEDENT          reduce using rule 15 (expr -> lookaround_expr .)
    BAR             reduce using rule 15 (expr -> lookaround_expr .)
    END_OF_ORBLOCK  reduce using rule 15 (expr -> lookaround_expr .)
    GLOBALMARK      reduce using rule 15 (expr -> lookaround_expr .)
    VARNAME         reduce using rule 15 (expr -> lookaround_expr .)
    LBRACKET        reduce using rule 15 (expr -> lookaround_expr .)


state 36

    (64) chain_begin -> SLASH . SLASH
    (66) chain_begin -> SLASH .

    SLASH           shift and go to state 75
    VARNAME         reduce using rule 66 (chain_begin -> SLASH .)
    FAIL            reduce using rule 66 (chain_begin -> SLASH .)
    NON             reduce using rule 66 (chain_begin -> SLASH .)
    EQUALSIGN       reduce using rule 66 (chain_begin -> SLASH .)


state 37

    (7) root_expression -> expression .

    $end            reduce using rule 7 (root_expression -> expression .)
    DEDENT          reduce using rule 7 (root_expression -> expression .)


state 38

    (4) oprex -> NEWLINE root_expression .

    $end            reduce using rule 4 (oprex -> NEWLINE root_expression .)


state 39

    (17) expr -> numrange_shortcut .

    INDENT          reduce using rule 17 (expr -> numrange_shortcut .)
    $end            reduce using rule 17 (expr -> numrange_shortcut .)
    DEDENT          reduce using rule 17 (expr -> numrange_shortcut .)
    BAR             reduce using rule 17 (expr -> numrange_shortcut .)
    END_OF_ORBLOCK  reduce using rule 17 (expr -> numrange_shortcut .)
    GLOBALMARK      reduce using rule 17 (expr -> numrange_shortcut .)
    VARNAME         reduce using rule 17 (expr -> numrange_shortcut .)
    LBRACKET        reduce using rule 17 (expr -> numrange_shortcut .)


state 40

    (11) expr -> string_expr .

    INDENT          reduce using rule 11 (expr -> string_expr .)
    $end            reduce using rule 11 (expr -> string_expr .)
    DEDENT          reduce using rule 11 (expr -> string_expr .)
    BAR             reduce using rule 11 (expr -> string_expr .)
    END_OF_ORBLOCK  reduce using rule 11 (expr -> string_expr .)
    GLOBALMARK      reduce using rule 11 (expr -> string_expr .)
    VARNAME         reduce using rule 11 (expr -> string_expr .)
    LBRACKET        reduce using rule 11 (expr -> string_expr .)


state 41

    (74) lookup_type -> variable_lookup .

    QUESTMARK       reduce using rule 74 (lookup_type -> variable_lookup .)
    NEWLINE         reduce using rule 74 (lookup_type -> variable_lookup .)
    SLASH           reduce using rule 74 (lookup_type -> variable_lookup .)
    BAR             reduce using rule 74 (lookup_type -> variable_lookup .)
    GT              reduce using rule 74 (lookup_type -> variable_lookup .)


state 42

    (40) scoped_flags -> LPAREN . FLAGSET RPAREN WHITESPACE

    FLAGSET         shift and go to state 76


state 43

    (8) root_expression -> global_flags expression .

    $end            reduce using rule 8 (root_expression -> global_flags expression .)
    DEDENT          reduce using rule 8 (root_expression -> global_flags expression .)


state 44

    (36) of -> WHITESPACE . OF
    (35) backtrack -> WHITESPACE . LT LT

    OF              shift and go to state 77
    LT              shift and go to state 78


state 45

    (33) repeat_range -> NUMBER backtrack . PLUS DOT DOT of
    (34) repeat_range -> NUMBER backtrack . PLUS DOT DOT NUMBER of

    PLUS            shift and go to state 79


state 46

    (30) repeat_N_times -> NUMBER of .

    WHITESPACE      reduce using rule 30 (repeat_N_times -> NUMBER of .)
    COLON           reduce using rule 30 (repeat_N_times -> NUMBER of .)


state 47

    (37) numrange -> NUMBER DOT . DOT
    (38) numrange -> NUMBER DOT . DOT NUMBER

    DOT             shift and go to state 80


state 48

    (60) lookup -> chain_begin lookup_chain . chain_end
    (67) chain_end -> . SLASH
    (68) chain_end -> . DOT
    (69) chain_end -> .

    SLASH           shift and go to state 83
    DOT             shift and go to state 82
    NEWLINE         reduce using rule 69 (chain_end -> .)
    GT              reduce using rule 69 (chain_end -> .)
    BAR             reduce using rule 69 (chain_end -> .)

    chain_end                      shift and go to state 81

state 49

    (70) lookup_chain -> lookup_item . SLASH
    (71) lookup_chain -> lookup_item . SLASH lookup_chain

    SLASH           shift and go to state 84


state 50

    (65) chain_begin -> DOT SLASH .

    VARNAME         reduce using rule 65 (chain_begin -> DOT SLASH .)
    FAIL            reduce using rule 65 (chain_begin -> DOT SLASH .)
    NON             reduce using rule 65 (chain_begin -> DOT SLASH .)
    EQUALSIGN       reduce using rule 65 (chain_begin -> DOT SLASH .)


state 51

    (20) string_expr -> str_b STRING . NEWLINE
    (21) string_expr -> str_b STRING . str_b NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE

    NEWLINE         shift and go to state 85
    DOT             shift and go to state 86
    UNDERSCORE      shift and go to state 12

    str_b                          shift and go to state 87

state 52

    (41) orblock_expr -> BEGIN_ORBLOCK NEWLINE . oritems END_OF_ORBLOCK
    (42) oritems -> . oritem
    (43) oritems -> . oritem oritems
    (44) oritem -> . or condition WHITESPACE QUESTMARK WHITESPACE expr
    (45) oritem -> . or condition WHITESPACE QUESTMARK NEWLINE
    (46) oritem -> . or expr
    (47) oritem -> . or NEWLINE
    (49) or -> . BAR

    BAR             shift and go to state 88

    oritems                        shift and go to state 89
    oritem                         shift and go to state 90
    or                             shift and go to state 91

state 53

    (58) lookup_expr -> lookup NEWLINE .

    INDENT          reduce using rule 58 (lookup_expr -> lookup NEWLINE .)
    $end            reduce using rule 58 (lookup_expr -> lookup NEWLINE .)
    DEDENT          reduce using rule 58 (lookup_expr -> lookup NEWLINE .)
    BAR             reduce using rule 58 (lookup_expr -> lookup NEWLINE .)
    END_OF_ORBLOCK  reduce using rule 58 (lookup_expr -> lookup NEWLINE .)
    GLOBALMARK      reduce using rule 58 (lookup_expr -> lookup NEWLINE .)
    VARNAME         reduce using rule 58 (lookup_expr -> lookup NEWLINE .)
    LBRACKET        reduce using rule 58 (lookup_expr -> lookup NEWLINE .)


state 54

    (39) flagged_expr -> scoped_flags expr .

    INDENT          reduce using rule 39 (flagged_expr -> scoped_flags expr .)
    $end            reduce using rule 39 (flagged_expr -> scoped_flags expr .)
    DEDENT          reduce using rule 39 (flagged_expr -> scoped_flags expr .)
    BAR             reduce using rule 39 (flagged_expr -> scoped_flags expr .)
    END_OF_ORBLOCK  reduce using rule 39 (flagged_expr -> scoped_flags expr .)
    GLOBALMARK      reduce using rule 39 (flagged_expr -> scoped_flags expr .)
    VARNAME         reduce using rule 39 (flagged_expr -> scoped_flags expr .)
    LBRACKET        reduce using rule 39 (flagged_expr -> scoped_flags expr .)


state 55

    (18) string_expr -> STRING NEWLINE .

    BAR             reduce using rule 18 (string_expr -> STRING NEWLINE .)
    END_OF_ORBLOCK  reduce using rule 18 (string_expr -> STRING NEWLINE .)
    INDENT          reduce using rule 18 (string_expr -> STRING NEWLINE .)
    $end            reduce using rule 18 (string_expr -> STRING NEWLINE .)
    DEDENT          reduce using rule 18 (string_expr -> STRING NEWLINE .)
    GLOBALMARK      reduce using rule 18 (string_expr -> STRING NEWLINE .)
    VARNAME         reduce using rule 18 (string_expr -> STRING NEWLINE .)
    LBRACKET        reduce using rule 18 (string_expr -> STRING NEWLINE .)


state 56

    (24) numrange_shortcut -> STRING DOT . DOT STRING NEWLINE
    (22) str_b -> DOT .

    DOT             shift and go to state 92
    NEWLINE         reduce using rule 22 (str_b -> DOT .)


state 57

    (19) string_expr -> STRING str_b . NEWLINE

    NEWLINE         shift and go to state 93


state 58

    (35) backtrack -> WHITESPACE . LT LT

    LT              shift and go to state 78


state 59

    (32) repeat_range -> numrange backtrack . MINUS of

    MINUS           shift and go to state 94


state 60

    (50) lookaround_expr -> BEGIN_LOOKAROUND NEWLINE . lookitems END_OF_LOOKAROUND
    (51) lookitems -> . lookitem NEWLINE
    (52) lookitems -> . lookitem NEWLINE lookitems
    (53) lookitem -> . BAR lookup GT
    (54) lookitem -> . BAR EXCLAMARK lookup GT
    (55) lookitem -> . LT lookup BAR
    (56) lookitem -> . LT EXCLAMARK lookup BAR
    (57) lookitem -> . BAR lookup BAR

    BAR             shift and go to state 95
    LT              shift and go to state 97

    lookitem                       shift and go to state 98
    lookitems                      shift and go to state 96

state 61

    (29) repeat_N_times -> AT NUMBER . of
    (37) numrange -> NUMBER . DOT DOT
    (38) numrange -> NUMBER . DOT DOT NUMBER
    (36) of -> . WHITESPACE OF

    DOT             shift and go to state 47
    WHITESPACE      shift and go to state 99

    of                             shift and go to state 100

state 62

    (31) repeat_range -> AT numrange . of
    (36) of -> . WHITESPACE OF

    WHITESPACE      shift and go to state 99

    of                             shift and go to state 101

state 63

    (61) chain_begin -> AT SLASH . SLASH
    (63) chain_begin -> AT SLASH .

    SLASH           shift and go to state 102
    VARNAME         reduce using rule 63 (chain_begin -> AT SLASH .)
    FAIL            reduce using rule 63 (chain_begin -> AT SLASH .)
    NON             reduce using rule 63 (chain_begin -> AT SLASH .)
    EQUALSIGN       reduce using rule 63 (chain_begin -> AT SLASH .)


state 64

    (62) chain_begin -> AT DOT . SLASH

    SLASH           shift and go to state 103


state 65

    (9) global_flags -> LPAREN FLAGSET . RPAREN NEWLINE
    (40) scoped_flags -> LPAREN FLAGSET . RPAREN WHITESPACE

    RPAREN          shift and go to state 104


state 66

    (26) quantified_expr -> quantifier COLON . charclass
    (81) charclass -> . charitems NEWLINE
    (82) charitems -> . WHITESPACE charitem
    (83) charitems -> . WHITESPACE charitem charitems

    WHITESPACE      shift and go to state 105

    charitems                      shift and go to state 107
    charclass                      shift and go to state 106

state 67

    (25) quantified_expr -> quantifier WHITESPACE . expr
    (11) expr -> . string_expr
    (12) expr -> . lookup_expr
    (13) expr -> . orblock_expr
    (14) expr -> . flagged_expr
    (15) expr -> . lookaround_expr
    (16) expr -> . quantified_expr
    (17) expr -> . numrange_shortcut
    (18) string_expr -> . STRING NEWLINE
    (19) string_expr -> . STRING str_b NEWLINE
    (20) string_expr -> . str_b STRING NEWLINE
    (21) string_expr -> . str_b STRING str_b NEWLINE
    (58) lookup_expr -> . lookup NEWLINE
    (41) orblock_expr -> . BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK
    (39) flagged_expr -> . scoped_flags expr
    (50) lookaround_expr -> . BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND
    (25) quantified_expr -> . quantifier WHITESPACE expr
    (26) quantified_expr -> . quantifier COLON charclass
    (24) numrange_shortcut -> . STRING DOT DOT STRING NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (40) scoped_flags -> . LPAREN FLAGSET RPAREN WHITESPACE
    (27) quantifier -> . repeat_N_times
    (28) quantifier -> . repeat_range
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (29) repeat_N_times -> . AT NUMBER of
    (30) repeat_N_times -> . NUMBER of
    (31) repeat_range -> . AT numrange of
    (32) repeat_range -> . numrange backtrack MINUS of
    (33) repeat_range -> . NUMBER backtrack PLUS DOT DOT of
    (34) repeat_range -> . NUMBER backtrack PLUS DOT DOT NUMBER of
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (37) numrange -> . NUMBER DOT DOT
    (38) numrange -> . NUMBER DOT DOT NUMBER
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    STRING          shift and go to state 21
    BEGIN_ORBLOCK   shift and go to state 16
    BEGIN_LOOKAROUND shift and go to state 24
    DOT             shift and go to state 14
    UNDERSCORE      shift and go to state 12
    LPAREN          shift and go to state 42
    AT              shift and go to state 25
    SLASH           shift and go to state 36
    NUMBER          shift and go to state 10
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    scoped_flags                   shift and go to state 20
    repeat_N_times                 shift and go to state 4
    flagged_expr                   shift and go to state 5
    repeat_range                   shift and go to state 8
    backreference                  shift and go to state 9
    chain_begin                    shift and go to state 11
    lookup_expr                    shift and go to state 13
    string_expr                    shift and go to state 40
    lookaround_expr                shift and go to state 35
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 18
    negated_lookup                 shift and go to state 19
    orblock_expr                   shift and go to state 22
    numrange                       shift and go to state 23
    quantifier                     shift and go to state 28
    quantified_expr                shift and go to state 31
    expr                           shift and go to state 108
    lookup_type                    shift and go to state 34
    str_b                          shift and go to state 15
    numrange_shortcut              shift and go to state 39
    variable_lookup                shift and go to state 41

state 68

    (80) backreference -> EQUALSIGN VARNAME .

    QUESTMARK       reduce using rule 80 (backreference -> EQUALSIGN VARNAME .)
    SLASH           reduce using rule 80 (backreference -> EQUALSIGN VARNAME .)
    GT              reduce using rule 80 (backreference -> EQUALSIGN VARNAME .)
    NEWLINE         reduce using rule 80 (backreference -> EQUALSIGN VARNAME .)
    BAR             reduce using rule 80 (backreference -> EQUALSIGN VARNAME .)


state 69

    (79) negated_lookup -> NON VARNAME .

    QUESTMARK       reduce using rule 79 (negated_lookup -> NON VARNAME .)
    NEWLINE         reduce using rule 79 (negated_lookup -> NON VARNAME .)
    BAR             reduce using rule 79 (negated_lookup -> NON VARNAME .)
    SLASH           reduce using rule 79 (negated_lookup -> NON VARNAME .)
    GT              reduce using rule 79 (negated_lookup -> NON VARNAME .)


state 70

    (5) oprex -> NEWLINE INDENT root_expression . DEDENT

    DEDENT          shift and go to state 109


state 71

    (92) begin_subblock -> INDENT .

    GLOBALMARK      reduce using rule 92 (begin_subblock -> INDENT .)
    VARNAME         reduce using rule 92 (begin_subblock -> INDENT .)
    LBRACKET        reduce using rule 92 (begin_subblock -> INDENT .)


state 72

    (90) optional_subblock -> begin_subblock . definitions end_subblock
    (94) definitions -> . definition
    (95) definitions -> . definition definitions
    (96) definition -> . assignment
    (97) definition -> . GLOBALMARK assignment
    (98) assignment -> . declaration equals assignment
    (99) assignment -> . declaration equals expression
    (100) assignment -> . declaration COLON charclass optional_subblock
    (105) declaration -> . VARNAME
    (106) declaration -> . LBRACKET VARNAME RBRACKET

    GLOBALMARK      shift and go to state 112
    VARNAME         shift and go to state 113
    LBRACKET        shift and go to state 114

    definition                     shift and go to state 110
    declaration                    shift and go to state 111
    assignment                     shift and go to state 115
    definitions                    shift and go to state 116

state 73

    (10) expression -> expr optional_subblock .

    $end            reduce using rule 10 (expression -> expr optional_subblock .)
    DEDENT          reduce using rule 10 (expression -> expr optional_subblock .)
    GLOBALMARK      reduce using rule 10 (expression -> expr optional_subblock .)
    VARNAME         reduce using rule 10 (expression -> expr optional_subblock .)
    LBRACKET        reduce using rule 10 (expression -> expr optional_subblock .)


state 74

    (73) lookup_item -> lookup_type QUESTMARK .

    SLASH           reduce using rule 73 (lookup_item -> lookup_type QUESTMARK .)
    NEWLINE         reduce using rule 73 (lookup_item -> lookup_type QUESTMARK .)
    GT              reduce using rule 73 (lookup_item -> lookup_type QUESTMARK .)
    BAR             reduce using rule 73 (lookup_item -> lookup_type QUESTMARK .)


state 75

    (64) chain_begin -> SLASH SLASH .

    VARNAME         reduce using rule 64 (chain_begin -> SLASH SLASH .)
    FAIL            reduce using rule 64 (chain_begin -> SLASH SLASH .)
    NON             reduce using rule 64 (chain_begin -> SLASH SLASH .)
    EQUALSIGN       reduce using rule 64 (chain_begin -> SLASH SLASH .)


state 76

    (40) scoped_flags -> LPAREN FLAGSET . RPAREN WHITESPACE

    RPAREN          shift and go to state 117


state 77

    (36) of -> WHITESPACE OF .

    WHITESPACE      reduce using rule 36 (of -> WHITESPACE OF .)
    COLON           reduce using rule 36 (of -> WHITESPACE OF .)


state 78

    (35) backtrack -> WHITESPACE LT . LT

    LT              shift and go to state 118


state 79

    (33) repeat_range -> NUMBER backtrack PLUS . DOT DOT of
    (34) repeat_range -> NUMBER backtrack PLUS . DOT DOT NUMBER of

    DOT             shift and go to state 119


state 80

    (37) numrange -> NUMBER DOT DOT .
    (38) numrange -> NUMBER DOT DOT . NUMBER

    WHITESPACE      reduce using rule 37 (numrange -> NUMBER DOT DOT .)
    NUMBER          shift and go to state 120


state 81

    (60) lookup -> chain_begin lookup_chain chain_end .

    GT              reduce using rule 60 (lookup -> chain_begin lookup_chain chain_end .)
    BAR             reduce using rule 60 (lookup -> chain_begin lookup_chain chain_end .)
    NEWLINE         reduce using rule 60 (lookup -> chain_begin lookup_chain chain_end .)


state 82

    (68) chain_end -> DOT .

    NEWLINE         reduce using rule 68 (chain_end -> DOT .)
    GT              reduce using rule 68 (chain_end -> DOT .)
    BAR             reduce using rule 68 (chain_end -> DOT .)


state 83

    (67) chain_end -> SLASH .

    NEWLINE         reduce using rule 67 (chain_end -> SLASH .)
    GT              reduce using rule 67 (chain_end -> SLASH .)
    BAR             reduce using rule 67 (chain_end -> SLASH .)


state 84

    (70) lookup_chain -> lookup_item SLASH .
    (71) lookup_chain -> lookup_item SLASH . lookup_chain
    (70) lookup_chain -> . lookup_item SLASH
    (71) lookup_chain -> . lookup_item SLASH lookup_chain
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    SLASH           reduce using rule 70 (lookup_chain -> lookup_item SLASH .)
    DOT             reduce using rule 70 (lookup_chain -> lookup_item SLASH .)
    NEWLINE         reduce using rule 70 (lookup_chain -> lookup_item SLASH .)
    GT              reduce using rule 70 (lookup_chain -> lookup_item SLASH .)
    BAR             reduce using rule 70 (lookup_chain -> lookup_item SLASH .)
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    lookup_type                    shift and go to state 34
    backreference                  shift and go to state 9
    lookup_item                    shift and go to state 49
    lookup_chain                   shift and go to state 121
    negated_lookup                 shift and go to state 19
    variable_lookup                shift and go to state 41

state 85

    (20) string_expr -> str_b STRING NEWLINE .

    BAR             reduce using rule 20 (string_expr -> str_b STRING NEWLINE .)
    END_OF_ORBLOCK  reduce using rule 20 (string_expr -> str_b STRING NEWLINE .)
    INDENT          reduce using rule 20 (string_expr -> str_b STRING NEWLINE .)
    $end            reduce using rule 20 (string_expr -> str_b STRING NEWLINE .)
    DEDENT          reduce using rule 20 (string_expr -> str_b STRING NEWLINE .)
    GLOBALMARK      reduce using rule 20 (string_expr -> str_b STRING NEWLINE .)
    VARNAME         reduce using rule 20 (string_expr -> str_b STRING NEWLINE .)
    LBRACKET        reduce using rule 20 (string_expr -> str_b STRING NEWLINE .)


state 86

    (22) str_b -> DOT .

    NEWLINE         reduce using rule 22 (str_b -> DOT .)


state 87

    (21) string_expr -> str_b STRING str_b . NEWLINE

    NEWLINE         shift and go to state 122


state 88

    (49) or -> BAR .

    NEWLINE         reduce using rule 49 (or -> BAR .)
    LBRACKET        reduce using rule 49 (or -> BAR .)
    STRING          reduce using rule 49 (or -> BAR .)
    BEGIN_ORBLOCK   reduce using rule 49 (or -> BAR .)
    BEGIN_LOOKAROUND reduce using rule 49 (or -> BAR .)
    DOT             reduce using rule 49 (or -> BAR .)
    UNDERSCORE      reduce using rule 49 (or -> BAR .)
    LPAREN          reduce using rule 49 (or -> BAR .)
    AT              reduce using rule 49 (or -> BAR .)
    SLASH           reduce using rule 49 (or -> BAR .)
    NUMBER          reduce using rule 49 (or -> BAR .)
    VARNAME         reduce using rule 49 (or -> BAR .)
    FAIL            reduce using rule 49 (or -> BAR .)
    NON             reduce using rule 49 (or -> BAR .)
    EQUALSIGN       reduce using rule 49 (or -> BAR .)


state 89

    (41) orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems . END_OF_ORBLOCK

    END_OF_ORBLOCK  shift and go to state 123


state 90

    (42) oritems -> oritem .
    (43) oritems -> oritem . oritems
    (42) oritems -> . oritem
    (43) oritems -> . oritem oritems
    (44) oritem -> . or condition WHITESPACE QUESTMARK WHITESPACE expr
    (45) oritem -> . or condition WHITESPACE QUESTMARK NEWLINE
    (46) oritem -> . or expr
    (47) oritem -> . or NEWLINE
    (49) or -> . BAR

    END_OF_ORBLOCK  reduce using rule 42 (oritems -> oritem .)
    BAR             shift and go to state 88

    oritems                        shift and go to state 124
    oritem                         shift and go to state 90
    or                             shift and go to state 91

state 91

    (44) oritem -> or . condition WHITESPACE QUESTMARK WHITESPACE expr
    (45) oritem -> or . condition WHITESPACE QUESTMARK NEWLINE
    (46) oritem -> or . expr
    (47) oritem -> or . NEWLINE
    (48) condition -> . LBRACKET VARNAME RBRACKET
    (11) expr -> . string_expr
    (12) expr -> . lookup_expr
    (13) expr -> . orblock_expr
    (14) expr -> . flagged_expr
    (15) expr -> . lookaround_expr
    (16) expr -> . quantified_expr
    (17) expr -> . numrange_shortcut
    (18) string_expr -> . STRING NEWLINE
    (19) string_expr -> . STRING str_b NEWLINE
    (20) string_expr -> . str_b STRING NEWLINE
    (21) string_expr -> . str_b STRING str_b NEWLINE
    (58) lookup_expr -> . lookup NEWLINE
    (41) orblock_expr -> . BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK
    (39) flagged_expr -> . scoped_flags expr
    (50) lookaround_expr -> . BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND
    (25) quantified_expr -> . quantifier WHITESPACE expr
    (26) quantified_expr -> . quantifier COLON charclass
    (24) numrange_shortcut -> . STRING DOT DOT STRING NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (40) scoped_flags -> . LPAREN FLAGSET RPAREN WHITESPACE
    (27) quantifier -> . repeat_N_times
    (28) quantifier -> . repeat_range
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (29) repeat_N_times -> . AT NUMBER of
    (30) repeat_N_times -> . NUMBER of
    (31) repeat_range -> . AT numrange of
    (32) repeat_range -> . numrange backtrack MINUS of
    (33) repeat_range -> . NUMBER backtrack PLUS DOT DOT of
    (34) repeat_range -> . NUMBER backtrack PLUS DOT DOT NUMBER of
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (37) numrange -> . NUMBER DOT DOT
    (38) numrange -> . NUMBER DOT DOT NUMBER
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    NEWLINE         shift and go to state 126
    LBRACKET        shift and go to state 125
    STRING          shift and go to state 21
    BEGIN_ORBLOCK   shift and go to state 16
    BEGIN_LOOKAROUND shift and go to state 24
    DOT             shift and go to state 14
    UNDERSCORE      shift and go to state 12
    LPAREN          shift and go to state 42
    AT              shift and go to state 25
    SLASH           shift and go to state 36
    NUMBER          shift and go to state 10
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    scoped_flags                   shift and go to state 20
    repeat_N_times                 shift and go to state 4
    flagged_expr                   shift and go to state 5
    repeat_range                   shift and go to state 8
    backreference                  shift and go to state 9
    chain_begin                    shift and go to state 11
    lookup_expr                    shift and go to state 13
    string_expr                    shift and go to state 40
    lookaround_expr                shift and go to state 35
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 18
    negated_lookup                 shift and go to state 19
    orblock_expr                   shift and go to state 22
    numrange                       shift and go to state 23
    quantifier                     shift and go to state 28
    condition                      shift and go to state 127
    quantified_expr                shift and go to state 31
    expr                           shift and go to state 128
    lookup_type                    shift and go to state 34
    str_b                          shift and go to state 15
    numrange_shortcut              shift and go to state 39
    variable_lookup                shift and go to state 41

state 92

    (24) numrange_shortcut -> STRING DOT DOT . STRING NEWLINE

    STRING          shift and go to state 129


state 93

    (19) string_expr -> STRING str_b NEWLINE .

    BAR             reduce using rule 19 (string_expr -> STRING str_b NEWLINE .)
    END_OF_ORBLOCK  reduce using rule 19 (string_expr -> STRING str_b NEWLINE .)
    INDENT          reduce using rule 19 (string_expr -> STRING str_b NEWLINE .)
    $end            reduce using rule 19 (string_expr -> STRING str_b NEWLINE .)
    DEDENT          reduce using rule 19 (string_expr -> STRING str_b NEWLINE .)
    GLOBALMARK      reduce using rule 19 (string_expr -> STRING str_b NEWLINE .)
    VARNAME         reduce using rule 19 (string_expr -> STRING str_b NEWLINE .)
    LBRACKET        reduce using rule 19 (string_expr -> STRING str_b NEWLINE .)


state 94

    (32) repeat_range -> numrange backtrack MINUS . of
    (36) of -> . WHITESPACE OF

    WHITESPACE      shift and go to state 99

    of                             shift and go to state 130

state 95

    (53) lookitem -> BAR . lookup GT
    (54) lookitem -> BAR . EXCLAMARK lookup GT
    (57) lookitem -> BAR . lookup BAR
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    EXCLAMARK       shift and go to state 131
    AT              shift and go to state 133
    SLASH           shift and go to state 36
    DOT             shift and go to state 134
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    lookup_type                    shift and go to state 34
    backreference                  shift and go to state 9
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 132
    chain_begin                    shift and go to state 11
    negated_lookup                 shift and go to state 19
    variable_lookup                shift and go to state 41

state 96

    (50) lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems . END_OF_LOOKAROUND

    END_OF_LOOKAROUND shift and go to state 135


state 97

    (55) lookitem -> LT . lookup BAR
    (56) lookitem -> LT . EXCLAMARK lookup BAR
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    EXCLAMARK       shift and go to state 136
    AT              shift and go to state 133
    SLASH           shift and go to state 36
    DOT             shift and go to state 134
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    lookup_type                    shift and go to state 34
    backreference                  shift and go to state 9
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 137
    chain_begin                    shift and go to state 11
    negated_lookup                 shift and go to state 19
    variable_lookup                shift and go to state 41

state 98

    (51) lookitems -> lookitem . NEWLINE
    (52) lookitems -> lookitem . NEWLINE lookitems

    NEWLINE         shift and go to state 138


state 99

    (36) of -> WHITESPACE . OF

    OF              shift and go to state 77


state 100

    (29) repeat_N_times -> AT NUMBER of .

    WHITESPACE      reduce using rule 29 (repeat_N_times -> AT NUMBER of .)
    COLON           reduce using rule 29 (repeat_N_times -> AT NUMBER of .)


state 101

    (31) repeat_range -> AT numrange of .

    WHITESPACE      reduce using rule 31 (repeat_range -> AT numrange of .)
    COLON           reduce using rule 31 (repeat_range -> AT numrange of .)


state 102

    (61) chain_begin -> AT SLASH SLASH .

    VARNAME         reduce using rule 61 (chain_begin -> AT SLASH SLASH .)
    FAIL            reduce using rule 61 (chain_begin -> AT SLASH SLASH .)
    NON             reduce using rule 61 (chain_begin -> AT SLASH SLASH .)
    EQUALSIGN       reduce using rule 61 (chain_begin -> AT SLASH SLASH .)


state 103

    (62) chain_begin -> AT DOT SLASH .

    VARNAME         reduce using rule 62 (chain_begin -> AT DOT SLASH .)
    FAIL            reduce using rule 62 (chain_begin -> AT DOT SLASH .)
    NON             reduce using rule 62 (chain_begin -> AT DOT SLASH .)
    EQUALSIGN       reduce using rule 62 (chain_begin -> AT DOT SLASH .)


state 104

    (9) global_flags -> LPAREN FLAGSET RPAREN . NEWLINE
    (40) scoped_flags -> LPAREN FLAGSET RPAREN . WHITESPACE

    NEWLINE         shift and go to state 139
    WHITESPACE      shift and go to state 140


state 105

    (82) charitems -> WHITESPACE . charitem
    (83) charitems -> WHITESPACE . charitem charitems
    (84) charitem -> . ranged_char
    (85) charitem -> . single_char
    (86) charitem -> . period_char
    (87) ranged_char -> . CHAR DOT DOT CHAR
    (89) single_char -> . CHAR
    (88) period_char -> . DOT

    CHAR            shift and go to state 146
    DOT             shift and go to state 145

    single_char                    shift and go to state 144
    charitem                       shift and go to state 142
    ranged_char                    shift and go to state 143
    period_char                    shift and go to state 141

state 106

    (26) quantified_expr -> quantifier COLON charclass .

    INDENT          reduce using rule 26 (quantified_expr -> quantifier COLON charclass .)
    $end            reduce using rule 26 (quantified_expr -> quantifier COLON charclass .)
    DEDENT          reduce using rule 26 (quantified_expr -> quantifier COLON charclass .)
    BAR             reduce using rule 26 (quantified_expr -> quantifier COLON charclass .)
    END_OF_ORBLOCK  reduce using rule 26 (quantified_expr -> quantifier COLON charclass .)
    GLOBALMARK      reduce using rule 26 (quantified_expr -> quantifier COLON charclass .)
    VARNAME         reduce using rule 26 (quantified_expr -> quantifier COLON charclass .)
    LBRACKET        reduce using rule 26 (quantified_expr -> quantifier COLON charclass .)


state 107

    (81) charclass -> charitems . NEWLINE

    NEWLINE         shift and go to state 147


state 108

    (25) quantified_expr -> quantifier WHITESPACE expr .

    INDENT          reduce using rule 25 (quantified_expr -> quantifier WHITESPACE expr .)
    $end            reduce using rule 25 (quantified_expr -> quantifier WHITESPACE expr .)
    DEDENT          reduce using rule 25 (quantified_expr -> quantifier WHITESPACE expr .)
    BAR             reduce using rule 25 (quantified_expr -> quantifier WHITESPACE expr .)
    END_OF_ORBLOCK  reduce using rule 25 (quantified_expr -> quantifier WHITESPACE expr .)
    GLOBALMARK      reduce using rule 25 (quantified_expr -> quantifier WHITESPACE expr .)
    VARNAME         reduce using rule 25 (quantified_expr -> quantifier WHITESPACE expr .)
    LBRACKET        reduce using rule 25 (quantified_expr -> quantifier WHITESPACE expr .)


state 109

    (5) oprex -> NEWLINE INDENT root_expression DEDENT .

    $end            reduce using rule 5 (oprex -> NEWLINE INDENT root_expression DEDENT .)


state 110

    (94) definitions -> definition .
    (95) definitions -> definition . definitions
    (94) definitions -> . definition
    (95) definitions -> . definition definitions
    (96) definition -> . assignment
    (97) definition -> . GLOBALMARK assignment
    (98) assignment -> . declaration equals assignment
    (99) assignment -> . declaration equals expression
    (100) assignment -> . declaration COLON charclass optional_subblock
    (105) declaration -> . VARNAME
    (106) declaration -> . LBRACKET VARNAME RBRACKET

    DEDENT          reduce using rule 94 (definitions -> definition .)
    GLOBALMARK      shift and go to state 112
    VARNAME         shift and go to state 113
    LBRACKET        shift and go to state 114

    definition                     shift and go to state 110
    assignment                     shift and go to state 115
    declaration                    shift and go to state 111
    definitions                    shift and go to state 148

state 111

    (98) assignment -> declaration . equals assignment
    (99) assignment -> declaration . equals expression
    (100) assignment -> declaration . COLON charclass optional_subblock
    (101) equals -> . EQUALSIGN
    (102) equals -> . WHITESPACE EQUALSIGN
    (103) equals -> . EQUALSIGN WHITESPACE
    (104) equals -> . WHITESPACE EQUALSIGN WHITESPACE

    COLON           shift and go to state 151
    EQUALSIGN       shift and go to state 152
    WHITESPACE      shift and go to state 149

    equals                         shift and go to state 150

state 112

    (97) definition -> GLOBALMARK . assignment
    (98) assignment -> . declaration equals assignment
    (99) assignment -> . declaration equals expression
    (100) assignment -> . declaration COLON charclass optional_subblock
    (105) declaration -> . VARNAME
    (106) declaration -> . LBRACKET VARNAME RBRACKET

    VARNAME         shift and go to state 113
    LBRACKET        shift and go to state 114

    assignment                     shift and go to state 153
    declaration                    shift and go to state 111

state 113

    (105) declaration -> VARNAME .

    COLON           reduce using rule 105 (declaration -> VARNAME .)
    EQUALSIGN       reduce using rule 105 (declaration -> VARNAME .)
    WHITESPACE      reduce using rule 105 (declaration -> VARNAME .)


state 114

    (106) declaration -> LBRACKET . VARNAME RBRACKET

    VARNAME         shift and go to state 154


state 115

    (96) definition -> assignment .

    GLOBALMARK      reduce using rule 96 (definition -> assignment .)
    VARNAME         reduce using rule 96 (definition -> assignment .)
    LBRACKET        reduce using rule 96 (definition -> assignment .)
    DEDENT          reduce using rule 96 (definition -> assignment .)


state 116

    (90) optional_subblock -> begin_subblock definitions . end_subblock
    (93) end_subblock -> . DEDENT

    DEDENT          shift and go to state 155

    end_subblock                   shift and go to state 156

state 117

    (40) scoped_flags -> LPAREN FLAGSET RPAREN . WHITESPACE

    WHITESPACE      shift and go to state 140


state 118

    (35) backtrack -> WHITESPACE LT LT .

    MINUS           reduce using rule 35 (backtrack -> WHITESPACE LT LT .)
    PLUS            reduce using rule 35 (backtrack -> WHITESPACE LT LT .)


state 119

    (33) repeat_range -> NUMBER backtrack PLUS DOT . DOT of
    (34) repeat_range -> NUMBER backtrack PLUS DOT . DOT NUMBER of

    DOT             shift and go to state 157


state 120

    (38) numrange -> NUMBER DOT DOT NUMBER .

    WHITESPACE      reduce using rule 38 (numrange -> NUMBER DOT DOT NUMBER .)


state 121

    (71) lookup_chain -> lookup_item SLASH lookup_chain .

    SLASH           reduce using rule 71 (lookup_chain -> lookup_item SLASH lookup_chain .)
    DOT             reduce using rule 71 (lookup_chain -> lookup_item SLASH lookup_chain .)
    NEWLINE         reduce using rule 71 (lookup_chain -> lookup_item SLASH lookup_chain .)
    GT              reduce using rule 71 (lookup_chain -> lookup_item SLASH lookup_chain .)
    BAR             reduce using rule 71 (lookup_chain -> lookup_item SLASH lookup_chain .)


state 122

    (21) string_expr -> str_b STRING str_b NEWLINE .

    BAR             reduce using rule 21 (string_expr -> str_b STRING str_b NEWLINE .)
    END_OF_ORBLOCK  reduce using rule 21 (string_expr -> str_b STRING str_b NEWLINE .)
    INDENT          reduce using rule 21 (string_expr -> str_b STRING str_b NEWLINE .)
    $end            reduce using rule 21 (string_expr -> str_b STRING str_b NEWLINE .)
    DEDENT          reduce using rule 21 (string_expr -> str_b STRING str_b NEWLINE .)
    GLOBALMARK      reduce using rule 21 (string_expr -> str_b STRING str_b NEWLINE .)
    VARNAME         reduce using rule 21 (string_expr -> str_b STRING str_b NEWLINE .)
    LBRACKET        reduce using rule 21 (string_expr -> str_b STRING str_b NEWLINE .)


state 123

    (41) orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK .

    INDENT          reduce using rule 41 (orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK .)
    $end            reduce using rule 41 (orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK .)
    DEDENT          reduce using rule 41 (orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK .)
    BAR             reduce using rule 41 (orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK .)
    END_OF_ORBLOCK  reduce using rule 41 (orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK .)
    GLOBALMARK      reduce using rule 41 (orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK .)
    VARNAME         reduce using rule 41 (orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK .)
    LBRACKET        reduce using rule 41 (orblock_expr -> BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK .)


state 124

    (43) oritems -> oritem oritems .

    END_OF_ORBLOCK  reduce using rule 43 (oritems -> oritem oritems .)


state 125

    (48) condition -> LBRACKET . VARNAME RBRACKET

    VARNAME         shift and go to state 158


state 126

    (47) oritem -> or NEWLINE .

    BAR             reduce using rule 47 (oritem -> or NEWLINE .)
    END_OF_ORBLOCK  reduce using rule 47 (oritem -> or NEWLINE .)


state 127

    (44) oritem -> or condition . WHITESPACE QUESTMARK WHITESPACE expr
    (45) oritem -> or condition . WHITESPACE QUESTMARK NEWLINE

    WHITESPACE      shift and go to state 159


state 128

    (46) oritem -> or expr .

    BAR             reduce using rule 46 (oritem -> or expr .)
    END_OF_ORBLOCK  reduce using rule 46 (oritem -> or expr .)


state 129

    (24) numrange_shortcut -> STRING DOT DOT STRING . NEWLINE

    NEWLINE         shift and go to state 160


state 130

    (32) repeat_range -> numrange backtrack MINUS of .

    WHITESPACE      reduce using rule 32 (repeat_range -> numrange backtrack MINUS of .)
    COLON           reduce using rule 32 (repeat_range -> numrange backtrack MINUS of .)


state 131

    (54) lookitem -> BAR EXCLAMARK . lookup GT
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    AT              shift and go to state 133
    SLASH           shift and go to state 36
    DOT             shift and go to state 134
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    lookup_type                    shift and go to state 34
    backreference                  shift and go to state 9
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 161
    chain_begin                    shift and go to state 11
    negated_lookup                 shift and go to state 19
    variable_lookup                shift and go to state 41

state 132

    (53) lookitem -> BAR lookup . GT
    (57) lookitem -> BAR lookup . BAR

    GT              shift and go to state 162
    BAR             shift and go to state 163


state 133

    (61) chain_begin -> AT . SLASH SLASH
    (62) chain_begin -> AT . DOT SLASH
    (63) chain_begin -> AT . SLASH

    SLASH           shift and go to state 63
    DOT             shift and go to state 64


state 134

    (65) chain_begin -> DOT . SLASH

    SLASH           shift and go to state 50


state 135

    (50) lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND .

    BAR             reduce using rule 50 (lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND .)
    END_OF_ORBLOCK  reduce using rule 50 (lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND .)
    INDENT          reduce using rule 50 (lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND .)
    DEDENT          reduce using rule 50 (lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND .)
    $end            reduce using rule 50 (lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND .)
    GLOBALMARK      reduce using rule 50 (lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND .)
    VARNAME         reduce using rule 50 (lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND .)
    LBRACKET        reduce using rule 50 (lookaround_expr -> BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND .)


state 136

    (56) lookitem -> LT EXCLAMARK . lookup BAR
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    AT              shift and go to state 133
    SLASH           shift and go to state 36
    DOT             shift and go to state 134
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    lookup_type                    shift and go to state 34
    backreference                  shift and go to state 9
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 164
    chain_begin                    shift and go to state 11
    negated_lookup                 shift and go to state 19
    variable_lookup                shift and go to state 41

state 137

    (55) lookitem -> LT lookup . BAR

    BAR             shift and go to state 165


state 138

    (51) lookitems -> lookitem NEWLINE .
    (52) lookitems -> lookitem NEWLINE . lookitems
    (51) lookitems -> . lookitem NEWLINE
    (52) lookitems -> . lookitem NEWLINE lookitems
    (53) lookitem -> . BAR lookup GT
    (54) lookitem -> . BAR EXCLAMARK lookup GT
    (55) lookitem -> . LT lookup BAR
    (56) lookitem -> . LT EXCLAMARK lookup BAR
    (57) lookitem -> . BAR lookup BAR

    END_OF_LOOKAROUND reduce using rule 51 (lookitems -> lookitem NEWLINE .)
    BAR             shift and go to state 95
    LT              shift and go to state 97

    lookitem                       shift and go to state 98
    lookitems                      shift and go to state 166

state 139

    (9) global_flags -> LPAREN FLAGSET RPAREN NEWLINE .

    STRING          reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    BEGIN_ORBLOCK   reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    BEGIN_LOOKAROUND reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    DOT             reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    UNDERSCORE      reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    LPAREN          reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    AT              reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    SLASH           reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    NUMBER          reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    VARNAME         reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    FAIL            reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    NON             reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    EQUALSIGN       reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    $end            reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)
    DEDENT          reduce using rule 9 (global_flags -> LPAREN FLAGSET RPAREN NEWLINE .)


state 140

    (40) scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .

    STRING          reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    BEGIN_ORBLOCK   reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    BEGIN_LOOKAROUND reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    DOT             reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    UNDERSCORE      reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    LPAREN          reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    AT              reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    SLASH           reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    NUMBER          reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    VARNAME         reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    FAIL            reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    NON             reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)
    EQUALSIGN       reduce using rule 40 (scoped_flags -> LPAREN FLAGSET RPAREN WHITESPACE .)


state 141

    (86) charitem -> period_char .

    WHITESPACE      reduce using rule 86 (charitem -> period_char .)
    NEWLINE         reduce using rule 86 (charitem -> period_char .)


state 142

    (82) charitems -> WHITESPACE charitem .
    (83) charitems -> WHITESPACE charitem . charitems
    (82) charitems -> . WHITESPACE charitem
    (83) charitems -> . WHITESPACE charitem charitems

    NEWLINE         reduce using rule 82 (charitems -> WHITESPACE charitem .)
    WHITESPACE      shift and go to state 105

    charitems                      shift and go to state 167

state 143

    (84) charitem -> ranged_char .

    WHITESPACE      reduce using rule 84 (charitem -> ranged_char .)
    NEWLINE         reduce using rule 84 (charitem -> ranged_char .)


state 144

    (85) charitem -> single_char .

    WHITESPACE      reduce using rule 85 (charitem -> single_char .)
    NEWLINE         reduce using rule 85 (charitem -> single_char .)


state 145

    (88) period_char -> DOT .

    WHITESPACE      reduce using rule 88 (period_char -> DOT .)
    NEWLINE         reduce using rule 88 (period_char -> DOT .)


state 146

    (87) ranged_char -> CHAR . DOT DOT CHAR
    (89) single_char -> CHAR .

    DOT             shift and go to state 168
    WHITESPACE      reduce using rule 89 (single_char -> CHAR .)
    NEWLINE         reduce using rule 89 (single_char -> CHAR .)


state 147

    (81) charclass -> charitems NEWLINE .

    INDENT          reduce using rule 81 (charclass -> charitems NEWLINE .)
    $end            reduce using rule 81 (charclass -> charitems NEWLINE .)
    DEDENT          reduce using rule 81 (charclass -> charitems NEWLINE .)
    BAR             reduce using rule 81 (charclass -> charitems NEWLINE .)
    END_OF_ORBLOCK  reduce using rule 81 (charclass -> charitems NEWLINE .)
    GLOBALMARK      reduce using rule 81 (charclass -> charitems NEWLINE .)
    VARNAME         reduce using rule 81 (charclass -> charitems NEWLINE .)
    LBRACKET        reduce using rule 81 (charclass -> charitems NEWLINE .)


state 148

    (95) definitions -> definition definitions .

    DEDENT          reduce using rule 95 (definitions -> definition definitions .)


state 149

    (102) equals -> WHITESPACE . EQUALSIGN
    (104) equals -> WHITESPACE . EQUALSIGN WHITESPACE

    EQUALSIGN       shift and go to state 169


state 150

    (98) assignment -> declaration equals . assignment
    (99) assignment -> declaration equals . expression
    (98) assignment -> . declaration equals assignment
    (99) assignment -> . declaration equals expression
    (100) assignment -> . declaration COLON charclass optional_subblock
    (10) expression -> . expr optional_subblock
    (105) declaration -> . VARNAME
    (106) declaration -> . LBRACKET VARNAME RBRACKET
    (11) expr -> . string_expr
    (12) expr -> . lookup_expr
    (13) expr -> . orblock_expr
    (14) expr -> . flagged_expr
    (15) expr -> . lookaround_expr
    (16) expr -> . quantified_expr
    (17) expr -> . numrange_shortcut
    (18) string_expr -> . STRING NEWLINE
    (19) string_expr -> . STRING str_b NEWLINE
    (20) string_expr -> . str_b STRING NEWLINE
    (21) string_expr -> . str_b STRING str_b NEWLINE
    (58) lookup_expr -> . lookup NEWLINE
    (41) orblock_expr -> . BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK
    (39) flagged_expr -> . scoped_flags expr
    (50) lookaround_expr -> . BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND
    (25) quantified_expr -> . quantifier WHITESPACE expr
    (26) quantified_expr -> . quantifier COLON charclass
    (24) numrange_shortcut -> . STRING DOT DOT STRING NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (40) scoped_flags -> . LPAREN FLAGSET RPAREN WHITESPACE
    (27) quantifier -> . repeat_N_times
    (28) quantifier -> . repeat_range
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (29) repeat_N_times -> . AT NUMBER of
    (30) repeat_N_times -> . NUMBER of
    (31) repeat_range -> . AT numrange of
    (32) repeat_range -> . numrange backtrack MINUS of
    (33) repeat_range -> . NUMBER backtrack PLUS DOT DOT of
    (34) repeat_range -> . NUMBER backtrack PLUS DOT DOT NUMBER of
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (37) numrange -> . NUMBER DOT DOT
    (38) numrange -> . NUMBER DOT DOT NUMBER
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    VARNAME         shift and go to state 170
    LBRACKET        shift and go to state 114
    STRING          shift and go to state 21
    BEGIN_ORBLOCK   shift and go to state 16
    BEGIN_LOOKAROUND shift and go to state 24
    DOT             shift and go to state 14
    UNDERSCORE      shift and go to state 12
    LPAREN          shift and go to state 42
    AT              shift and go to state 25
    SLASH           shift and go to state 36
    NUMBER          shift and go to state 10
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    scoped_flags                   shift and go to state 20
    repeat_N_times                 shift and go to state 4
    flagged_expr                   shift and go to state 5
    repeat_range                   shift and go to state 8
    backreference                  shift and go to state 9
    chain_begin                    shift and go to state 11
    lookup_expr                    shift and go to state 13
    lookaround_expr                shift and go to state 35
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 18
    negated_lookup                 shift and go to state 19
    orblock_expr                   shift and go to state 22
    assignment                     shift and go to state 171
    numrange                       shift and go to state 23
    declaration                    shift and go to state 111
    quantifier                     shift and go to state 28
    quantified_expr                shift and go to state 31
    numrange_shortcut              shift and go to state 39
    lookup_type                    shift and go to state 34
    str_b                          shift and go to state 15
    expression                     shift and go to state 172
    expr                           shift and go to state 33
    string_expr                    shift and go to state 40
    variable_lookup                shift and go to state 41

state 151

    (100) assignment -> declaration COLON . charclass optional_subblock
    (81) charclass -> . charitems NEWLINE
    (82) charitems -> . WHITESPACE charitem
    (83) charitems -> . WHITESPACE charitem charitems

    WHITESPACE      shift and go to state 105

    charitems                      shift and go to state 107
    charclass                      shift and go to state 173

state 152

    (101) equals -> EQUALSIGN .
    (103) equals -> EQUALSIGN . WHITESPACE

    VARNAME         reduce using rule 101 (equals -> EQUALSIGN .)
    LBRACKET        reduce using rule 101 (equals -> EQUALSIGN .)
    STRING          reduce using rule 101 (equals -> EQUALSIGN .)
    BEGIN_ORBLOCK   reduce using rule 101 (equals -> EQUALSIGN .)
    BEGIN_LOOKAROUND reduce using rule 101 (equals -> EQUALSIGN .)
    DOT             reduce using rule 101 (equals -> EQUALSIGN .)
    UNDERSCORE      reduce using rule 101 (equals -> EQUALSIGN .)
    LPAREN          reduce using rule 101 (equals -> EQUALSIGN .)
    AT              reduce using rule 101 (equals -> EQUALSIGN .)
    SLASH           reduce using rule 101 (equals -> EQUALSIGN .)
    NUMBER          reduce using rule 101 (equals -> EQUALSIGN .)
    FAIL            reduce using rule 101 (equals -> EQUALSIGN .)
    NON             reduce using rule 101 (equals -> EQUALSIGN .)
    EQUALSIGN       reduce using rule 101 (equals -> EQUALSIGN .)
    WHITESPACE      shift and go to state 174


state 153

    (97) definition -> GLOBALMARK assignment .

    GLOBALMARK      reduce using rule 97 (definition -> GLOBALMARK assignment .)
    VARNAME         reduce using rule 97 (definition -> GLOBALMARK assignment .)
    LBRACKET        reduce using rule 97 (definition -> GLOBALMARK assignment .)
    DEDENT          reduce using rule 97 (definition -> GLOBALMARK assignment .)


state 154

    (106) declaration -> LBRACKET VARNAME . RBRACKET

    RBRACKET        shift and go to state 175


state 155

    (93) end_subblock -> DEDENT .

    $end            reduce using rule 93 (end_subblock -> DEDENT .)
    DEDENT          reduce using rule 93 (end_subblock -> DEDENT .)
    GLOBALMARK      reduce using rule 93 (end_subblock -> DEDENT .)
    VARNAME         reduce using rule 93 (end_subblock -> DEDENT .)
    LBRACKET        reduce using rule 93 (end_subblock -> DEDENT .)


state 156

    (90) optional_subblock -> begin_subblock definitions end_subblock .

    $end            reduce using rule 90 (optional_subblock -> begin_subblock definitions end_subblock .)
    DEDENT          reduce using rule 90 (optional_subblock -> begin_subblock definitions end_subblock .)
    GLOBALMARK      reduce using rule 90 (optional_subblock -> begin_subblock definitions end_subblock .)
    VARNAME         reduce using rule 90 (optional_subblock -> begin_subblock definitions end_subblock .)
    LBRACKET        reduce using rule 90 (optional_subblock -> begin_subblock definitions end_subblock .)


state 157

    (33) repeat_range -> NUMBER backtrack PLUS DOT DOT . of
    (34) repeat_range -> NUMBER backtrack PLUS DOT DOT . NUMBER of
    (36) of -> . WHITESPACE OF

    NUMBER          shift and go to state 177
    WHITESPACE      shift and go to state 99

    of                             shift and go to state 176

state 158

    (48) condition -> LBRACKET VARNAME . RBRACKET

    RBRACKET        shift and go to state 178


state 159

    (44) oritem -> or condition WHITESPACE . QUESTMARK WHITESPACE expr
    (45) oritem -> or condition WHITESPACE . QUESTMARK NEWLINE

    QUESTMARK       shift and go to state 179


state 160

    (24) numrange_shortcut -> STRING DOT DOT STRING NEWLINE .

    INDENT          reduce using rule 24 (numrange_shortcut -> STRING DOT DOT STRING NEWLINE .)
    $end            reduce using rule 24 (numrange_shortcut -> STRING DOT DOT STRING NEWLINE .)
    DEDENT          reduce using rule 24 (numrange_shortcut -> STRING DOT DOT STRING NEWLINE .)
    BAR             reduce using rule 24 (numrange_shortcut -> STRING DOT DOT STRING NEWLINE .)
    END_OF_ORBLOCK  reduce using rule 24 (numrange_shortcut -> STRING DOT DOT STRING NEWLINE .)
    GLOBALMARK      reduce using rule 24 (numrange_shortcut -> STRING DOT DOT STRING NEWLINE .)
    VARNAME         reduce using rule 24 (numrange_shortcut -> STRING DOT DOT STRING NEWLINE .)
    LBRACKET        reduce using rule 24 (numrange_shortcut -> STRING DOT DOT STRING NEWLINE .)


state 161

    (54) lookitem -> BAR EXCLAMARK lookup . GT

    GT              shift and go to state 180


state 162

    (53) lookitem -> BAR lookup GT .

    NEWLINE         reduce using rule 53 (lookitem -> BAR lookup GT .)


state 163

    (57) lookitem -> BAR lookup BAR .

    NEWLINE         reduce using rule 57 (lookitem -> BAR lookup BAR .)


state 164

    (56) lookitem -> LT EXCLAMARK lookup . BAR

    BAR             shift and go to state 181


state 165

    (55) lookitem -> LT lookup BAR .

    NEWLINE         reduce using rule 55 (lookitem -> LT lookup BAR .)


state 166

    (52) lookitems -> lookitem NEWLINE lookitems .

    END_OF_LOOKAROUND reduce using rule 52 (lookitems -> lookitem NEWLINE lookitems .)


state 167

    (83) charitems -> WHITESPACE charitem charitems .

    NEWLINE         reduce using rule 83 (charitems -> WHITESPACE charitem charitems .)


state 168

    (87) ranged_char -> CHAR DOT . DOT CHAR

    DOT             shift and go to state 182


state 169

    (102) equals -> WHITESPACE EQUALSIGN .
    (104) equals -> WHITESPACE EQUALSIGN . WHITESPACE

    VARNAME         reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    LBRACKET        reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    STRING          reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    BEGIN_ORBLOCK   reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    BEGIN_LOOKAROUND reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    DOT             reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    UNDERSCORE      reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    LPAREN          reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    AT              reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    SLASH           reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    NUMBER          reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    FAIL            reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    NON             reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    EQUALSIGN       reduce using rule 102 (equals -> WHITESPACE EQUALSIGN .)
    WHITESPACE      shift and go to state 183


state 170

    (105) declaration -> VARNAME .
    (77) variable_lookup -> VARNAME .

    COLON           reduce using rule 105 (declaration -> VARNAME .)
    EQUALSIGN       reduce using rule 105 (declaration -> VARNAME .)
    WHITESPACE      reduce using rule 105 (declaration -> VARNAME .)
    QUESTMARK       reduce using rule 77 (variable_lookup -> VARNAME .)
    NEWLINE         reduce using rule 77 (variable_lookup -> VARNAME .)


state 171

    (98) assignment -> declaration equals assignment .

    GLOBALMARK      reduce using rule 98 (assignment -> declaration equals assignment .)
    VARNAME         reduce using rule 98 (assignment -> declaration equals assignment .)
    LBRACKET        reduce using rule 98 (assignment -> declaration equals assignment .)
    DEDENT          reduce using rule 98 (assignment -> declaration equals assignment .)


state 172

    (99) assignment -> declaration equals expression .

    GLOBALMARK      reduce using rule 99 (assignment -> declaration equals expression .)
    VARNAME         reduce using rule 99 (assignment -> declaration equals expression .)
    LBRACKET        reduce using rule 99 (assignment -> declaration equals expression .)
    DEDENT          reduce using rule 99 (assignment -> declaration equals expression .)


state 173

    (100) assignment -> declaration COLON charclass . optional_subblock
    (90) optional_subblock -> . begin_subblock definitions end_subblock
    (91) optional_subblock -> .
    (92) begin_subblock -> . INDENT

    GLOBALMARK      reduce using rule 91 (optional_subblock -> .)
    VARNAME         reduce using rule 91 (optional_subblock -> .)
    LBRACKET        reduce using rule 91 (optional_subblock -> .)
    DEDENT          reduce using rule 91 (optional_subblock -> .)
    INDENT          shift and go to state 71

    begin_subblock                 shift and go to state 72
    optional_subblock              shift and go to state 184

state 174

    (103) equals -> EQUALSIGN WHITESPACE .

    VARNAME         reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    LBRACKET        reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    STRING          reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    BEGIN_ORBLOCK   reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    BEGIN_LOOKAROUND reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    DOT             reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    UNDERSCORE      reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    LPAREN          reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    AT              reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    SLASH           reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    NUMBER          reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    FAIL            reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    NON             reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)
    EQUALSIGN       reduce using rule 103 (equals -> EQUALSIGN WHITESPACE .)


state 175

    (106) declaration -> LBRACKET VARNAME RBRACKET .

    COLON           reduce using rule 106 (declaration -> LBRACKET VARNAME RBRACKET .)
    EQUALSIGN       reduce using rule 106 (declaration -> LBRACKET VARNAME RBRACKET .)
    WHITESPACE      reduce using rule 106 (declaration -> LBRACKET VARNAME RBRACKET .)


state 176

    (33) repeat_range -> NUMBER backtrack PLUS DOT DOT of .

    WHITESPACE      reduce using rule 33 (repeat_range -> NUMBER backtrack PLUS DOT DOT of .)
    COLON           reduce using rule 33 (repeat_range -> NUMBER backtrack PLUS DOT DOT of .)


state 177

    (34) repeat_range -> NUMBER backtrack PLUS DOT DOT NUMBER . of
    (36) of -> . WHITESPACE OF

    WHITESPACE      shift and go to state 99

    of                             shift and go to state 185

state 178

    (48) condition -> LBRACKET VARNAME RBRACKET .

    WHITESPACE      reduce using rule 48 (condition -> LBRACKET VARNAME RBRACKET .)


state 179

    (44) oritem -> or condition WHITESPACE QUESTMARK . WHITESPACE expr
    (45) oritem -> or condition WHITESPACE QUESTMARK . NEWLINE

    WHITESPACE      shift and go to state 186
    NEWLINE         shift and go to state 187


state 180

    (54) lookitem -> BAR EXCLAMARK lookup GT .

    NEWLINE         reduce using rule 54 (lookitem -> BAR EXCLAMARK lookup GT .)


state 181

    (56) lookitem -> LT EXCLAMARK lookup BAR .

    NEWLINE         reduce using rule 56 (lookitem -> LT EXCLAMARK lookup BAR .)


state 182

    (87) ranged_char -> CHAR DOT DOT . CHAR

    CHAR            shift and go to state 188


state 183

    (104) equals -> WHITESPACE EQUALSIGN WHITESPACE .

    VARNAME         reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    LBRACKET        reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    STRING          reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    BEGIN_ORBLOCK   reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    BEGIN_LOOKAROUND reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    DOT             reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    UNDERSCORE      reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    LPAREN          reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    AT              reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    SLASH           reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    NUMBER          reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    FAIL            reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    NON             reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)
    EQUALSIGN       reduce using rule 104 (equals -> WHITESPACE EQUALSIGN WHITESPACE .)


state 184

    (100) assignment -> declaration COLON charclass optional_subblock .

    GLOBALMARK      reduce using rule 100 (assignment -> declaration COLON charclass optional_subblock .)
    VARNAME         reduce using rule 100 (assignment -> declaration COLON charclass optional_subblock .)
    LBRACKET        reduce using rule 100 (assignment -> declaration COLON charclass optional_subblock .)
    DEDENT          reduce using rule 100 (assignment -> declaration COLON charclass optional_subblock .)


state 185

    (34) repeat_range -> NUMBER backtrack PLUS DOT DOT NUMBER of .

    WHITESPACE      reduce using rule 34 (repeat_range -> NUMBER backtrack PLUS DOT DOT NUMBER of .)
    COLON           reduce using rule 34 (repeat_range -> NUMBER backtrack PLUS DOT DOT NUMBER of .)


state 186

    (44) oritem -> or condition WHITESPACE QUESTMARK WHITESPACE . expr
    (11) expr -> . string_expr
    (12) expr -> . lookup_expr
    (13) expr -> . orblock_expr
    (14) expr -> . flagged_expr
    (15) expr -> . lookaround_expr
    (16) expr -> . quantified_expr
    (17) expr -> . numrange_shortcut
    (18) string_expr -> . STRING NEWLINE
    (19) string_expr -> . STRING str_b NEWLINE
    (20) string_expr -> . str_b STRING NEWLINE
    (21) string_expr -> . str_b STRING str_b NEWLINE
    (58) lookup_expr -> . lookup NEWLINE
    (41) orblock_expr -> . BEGIN_ORBLOCK NEWLINE oritems END_OF_ORBLOCK
    (39) flagged_expr -> . scoped_flags expr
    (50) lookaround_expr -> . BEGIN_LOOKAROUND NEWLINE lookitems END_OF_LOOKAROUND
    (25) quantified_expr -> . quantifier WHITESPACE expr
    (26) quantified_expr -> . quantifier COLON charclass
    (24) numrange_shortcut -> . STRING DOT DOT STRING NEWLINE
    (22) str_b -> . DOT
    (23) str_b -> . UNDERSCORE
    (59) lookup -> . lookup_item
    (60) lookup -> . chain_begin lookup_chain chain_end
    (40) scoped_flags -> . LPAREN FLAGSET RPAREN WHITESPACE
    (27) quantifier -> . repeat_N_times
    (28) quantifier -> . repeat_range
    (72) lookup_item -> . lookup_type
    (73) lookup_item -> . lookup_type QUESTMARK
    (61) chain_begin -> . AT SLASH SLASH
    (62) chain_begin -> . AT DOT SLASH
    (63) chain_begin -> . AT SLASH
    (64) chain_begin -> . SLASH SLASH
    (65) chain_begin -> . DOT SLASH
    (66) chain_begin -> . SLASH
    (29) repeat_N_times -> . AT NUMBER of
    (30) repeat_N_times -> . NUMBER of
    (31) repeat_range -> . AT numrange of
    (32) repeat_range -> . numrange backtrack MINUS of
    (33) repeat_range -> . NUMBER backtrack PLUS DOT DOT of
    (34) repeat_range -> . NUMBER backtrack PLUS DOT DOT NUMBER of
    (74) lookup_type -> . variable_lookup
    (75) lookup_type -> . negated_lookup
    (76) lookup_type -> . backreference
    (37) numrange -> . NUMBER DOT DOT
    (38) numrange -> . NUMBER DOT DOT NUMBER
    (77) variable_lookup -> . VARNAME
    (78) variable_lookup -> . FAIL
    (79) negated_lookup -> . NON VARNAME
    (80) backreference -> . EQUALSIGN VARNAME

    STRING          shift and go to state 21
    BEGIN_ORBLOCK   shift and go to state 16
    BEGIN_LOOKAROUND shift and go to state 24
    DOT             shift and go to state 14
    UNDERSCORE      shift and go to state 12
    LPAREN          shift and go to state 42
    AT              shift and go to state 25
    SLASH           shift and go to state 36
    NUMBER          shift and go to state 10
    VARNAME         shift and go to state 7
    FAIL            shift and go to state 27
    NON             shift and go to state 30
    EQUALSIGN       shift and go to state 29

    scoped_flags                   shift and go to state 20
    repeat_N_times                 shift and go to state 4
    flagged_expr                   shift and go to state 5
    repeat_range                   shift and go to state 8
    backreference                  shift and go to state 9
    chain_begin                    shift and go to state 11
    lookup_expr                    shift and go to state 13
    string_expr                    shift and go to state 40
    lookaround_expr                shift and go to state 35
    lookup_item                    shift and go to state 17
    lookup                         shift and go to state 18
    negated_lookup                 shift and go to state 19
    orblock_expr                   shift and go to state 22
    numrange                       shift and go to state 23
    quantifier                     shift and go to state 28
    quantified_expr                shift and go to state 31
    expr                           shift and go to state 189
    lookup_type                    shift and go to state 34
    str_b                          shift and go to state 15
    numrange_shortcut              shift and go to state 39
    variable_lookup                shift and go to state 41

state 187

    (45) oritem -> or condition WHITESPACE QUESTMARK NEWLINE .

    BAR             reduce using rule 45 (oritem -> or condition WHITESPACE QUESTMARK NEWLINE .)
    END_OF_ORBLOCK  reduce using rule 45 (oritem -> or condition WHITESPACE QUESTMARK NEWLINE .)


state 188

    (87) ranged_char -> CHAR DOT DOT CHAR .

    WHITESPACE      reduce using rule 87 (ranged_char -> CHAR DOT DOT CHAR .)
    NEWLINE         reduce using rule 87 (ranged_char -> CHAR DOT DOT CHAR .)


state 189

    (44) oritem -> or condition WHITESPACE QUESTMARK WHITESPACE expr .

    BAR             reduce using rule 44 (oritem -> or condition WHITESPACE QUESTMARK WHITESPACE expr .)
    END_OF_ORBLOCK  reduce using rule 44 (oritem -> or condition WHITESPACE QUESTMARK WHITESPACE expr .)

